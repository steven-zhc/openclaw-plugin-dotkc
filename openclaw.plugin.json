{
  "id": "dotkc",
  "label": "dotkc",
  "description": "dotkc integration: safe secrets inspection + env-injection workflows for OpenClaw (requires DOTKC_NO_LEAK=1)",
  "kind": "tools",
  "configSchema": {
    "type": "object",
    "additionalProperties": false,
    "properties": {
      "dotkcBin": { "type": "string", "default": "" },
      "vaultPath": { "type": "string" },
      "keyPath": { "type": "string" },
      "specFile": { "type": "string", "default": "./dotkc.spec" },
      "allowUnsafe": { "type": "boolean", "default": false },
      "commandAllowlist": {
        "type": "array",
        "items": { "type": "string" },
        "default": [],
        "description": "Allowed executable names for dotkc_run (e.g. ['node','pnpm'])."
      }
    }
  },
  "uiHints": {
    "dotkcBin": { "label": "dotkc binary", "placeholder": "dotkc" },
    "vaultPath": { "label": "Vault path (optional)", "placeholder": "/path/to/dotkc.vault" },
    "keyPath": { "label": "Key path (optional)", "placeholder": "~/.dotkc/key", "sensitive": true },
    "specFile": { "label": "Spec allowlist file", "placeholder": "./dotkc.spec" },
    "allowUnsafe": { "label": "Allow unsafe values", "help": "If enabled, dotkc_inspect may return raw values. Strongly discouraged." },
    "commandAllowlist": { "label": "Command allowlist (dotkc_run)", "help": "Only these executables may be run via dotkc_run (e.g. node, pnpm)." }
  },
  "tools": [
    {
      "name": "dotkc_status",
      "description": "dotkc status as OpenClaw JSON (paths + canDecrypt).",
      "optional": false
    },
    {
      "name": "dotkc_doctor",
      "description": "dotkc doctor as OpenClaw JSON diagnostics.",
      "optional": true
    },
    {
      "name": "dotkc_inspect",
      "description": "Resolve allowlisted specs and return redacted env preview (never prints values by default).",
      "optional": true
    },
    {
      "name": "dotkc_run",
      "description": "Run an allowlisted command with secrets injected via dotkc (returns tails only; fail-closed on suspected leakage).",
      "optional": true
    }
  ]
}
